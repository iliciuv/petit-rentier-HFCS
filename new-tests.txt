############################## NO PENSIONS ##############################

Generalized linear mixed model fit by maximum likelihood (Adaptive Gauss-Hermite Quadrature, nAGQ
  = 0) [glmerMod]
 Family: binomial  ( logit )
Formula: rentsbi ~ factor(wave) + hsize + head_gendr + age + edu_ref +
    homeown + otherp + bonds + mutual + shares + managed + otherfin +
    haspvpens + class + (1 | sa0100) + (1 | sa0100:wave)
   Data: dataset_s
Weights: weights
Control: glmerControl(optimizer = "bobyqa", boundary.tol = 1e-05, calc.derivs = FALSE,
    optCtrl = list(maxfun = 2e+05))

     AIC      BIC   logLik deviance df.resid
 95382.8  95643.3 -47666.4  95332.8   247376

Scaled residuals:
   Min     1Q Median     3Q    Max
-5.006 -0.256 -0.141 -0.074 45.141

Random effects:
 Groups      Name        Variance Std.Dev.
 sa0100:wave (Intercept) 0.1212   0.3481
 sa0100      (Intercept) 0.4149   0.6441
Number of obs: 247401, groups:  sa0100:wave, 68; sa0100, 20

Fixed effects:
                      Estimate Std. Error z value Pr(>|z|)
(Intercept)          -4.051237   0.179562 -22.562  < 2e-16 ***
factor(wave)2        -0.230289   0.135339  -1.702 0.088835 .
factor(wave)3        -0.239418   0.133518  -1.793 0.072948 .
factor(wave)4        -0.316326   0.134243  -2.356 0.018454 *
hsize                -0.161252   0.008141 -19.807  < 2e-16 ***
head_gendrfemale      0.032630   0.017500   1.865 0.062235 .
age0-29               0.066814   0.045914   1.455 0.145617
age50-69              0.189579   0.023387   8.106 5.23e-16 ***
age+70                0.475989   0.032725  14.545  < 2e-16 ***
edu_refprimary       -0.172752   0.025370  -6.809 9.80e-12 ***
edu_reftertiary       0.114720   0.019373   5.922 3.19e-09 ***
homeownhomeowner      0.415362   0.022125  18.774  < 2e-16 ***
otherpmultiowner      1.759011   0.017931  98.100  < 2e-16 ***
bondshas-bonds        0.681735   0.034979  19.490  < 2e-16 ***
mutualhas-mutual      0.382457   0.024482  15.622  < 2e-16 ***
shareshas-shares      0.541688   0.023423  23.126  < 2e-16 ***
managedhas-managed    0.466888   0.040233  11.605  < 2e-16 ***
otherfinhas-otherfin  0.332500   0.035315   9.415  < 2e-16 ***
haspvpenshas-pvpens   0.583832   0.019006  30.719  < 2e-16 ***
classEmployer         0.804714   0.213651   3.766 0.000166 ***
classSelf-Employed    0.812477   0.175926   4.618 3.87e-06 ***
classManager         -0.223136   0.037131  -6.009 1.86e-09 ***
classInactive         0.371874   0.025645  14.501  < 2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Correlation matrix not shown by default, as p = 23 > 12.
Use print(x, correlation=TRUE)  or
    vcov(x)        if you need it
-----------------------------------------------------------------------------------------------
       Feature        Gain       Cover  Frequency
 1:     otherp 0.438037079 0.139309019 0.03181818
 2:     sa0100 0.270782323 0.287083126 0.29181818
 3:     shares 0.077526828 0.070409815 0.05303030
 4:  haspvpens 0.045791488 0.047687386 0.04303030
 5:      class 0.041156219 0.030833492 0.07484848
 6:        age 0.029340329 0.042139031 0.08575758
 7:      hsize 0.018514071 0.059372593 0.07727273
 8:     mutual 0.016243120 0.056242521 0.04121212
 9:      bonds 0.016043151 0.054994195 0.04787879
10:       wave 0.011703330 0.047357502 0.08696970
11:    homeown 0.011379344 0.052401044 0.03575758
12:    managed 0.009319232 0.043506992 0.04212121
13:    edu_ref 0.008693062 0.033461379 0.05000000
14:   otherfin 0.004822729 0.031517221 0.02878788
15: head_gendr 0.000647693 0.003684684 0.00969697
[1] "LightGBM Accuracy: 0.886507083641096"
Confusion Matrix and Statistics

          Reference
Prediction      0      1
         0 926172  62754
         1  64932  71199

               Accuracy : 0.8865
                 95% CI : (0.8859, 0.8871)
    No Information Rate : 0.8809
    P-Value [Acc > NIR] : < 2.2e-16

                  Kappa : 0.4628

 Mcnemar's Test P-Value : 1.112e-09

            Sensitivity : 0.53152
            Specificity : 0.93449
         Pos Pred Value : 0.52302
         Neg Pred Value : 0.93654
             Prevalence : 0.11906
         Detection Rate : 0.06328
   Detection Prevalence : 0.12100
      Balanced Accuracy : 0.73300

       'Positive' Class : 1

############################## WITH PENSIONS ##############################

Generalized linear mixed model fit by maximum likelihood (Adaptive Gauss-Hermite Quadrature, nAGQ
  = 0) [glmerMod]
 Family: binomial  ( logit )
Formula: rentsbi_pens ~ factor(wave) + hsize + head_gendr + age + edu_ref +
    homeown + otherp + bonds + mutual + shares + managed + otherfin +
    haspvpens + class + (1 | sa0100) + (1 | sa0100:wave)
   Data: dataset_s
Weights: weights
Control: glmerControl(optimizer = "bobyqa", boundary.tol = 1e-05, calc.derivs = FALSE,
    optCtrl = list(maxfun = 2e+05))

     AIC      BIC   logLik deviance df.resid
108919.6 109180.1 -54434.8 108869.6   247376

Scaled residuals:
   Min     1Q Median     3Q    Max
-4.909 -0.288 -0.157 -0.078 38.750

Random effects:
 Groups      Name        Variance Std.Dev.
 sa0100:wave (Intercept) 0.09242  0.3040
 sa0100      (Intercept) 0.56037  0.7486
Number of obs: 247401, groups:  sa0100:wave, 68; sa0100, 20

Fixed effects:
                      Estimate Std. Error z value Pr(>|z|)
(Intercept)          -3.889599   0.192305 -20.226  < 2e-16 ***
factor(wave)2        -0.237667   0.118572  -2.004  0.04503 *
factor(wave)3        -0.219260   0.116917  -1.875  0.06075 .
factor(wave)4        -0.201388   0.117410  -1.715  0.08630 .
hsize                -0.140583   0.007614 -18.465  < 2e-16 ***
head_gendrfemale      0.007330   0.016187   0.453  0.65065
age0-29              -0.086426   0.044846  -1.927  0.05396 .
age50-69              0.347204   0.022212  15.631  < 2e-16 ***
age+70                0.718163   0.029961  23.970  < 2e-16 ***
edu_refprimary       -0.340046   0.023791 -14.293  < 2e-16 ***
edu_reftertiary       0.112652   0.017978   6.266  3.7e-10 ***
homeownhomeowner      0.337823   0.019786  17.074  < 2e-16 ***
otherpmultiowner      1.575182   0.016776  93.894  < 2e-16 ***
bondshas-bonds        0.646710   0.033568  19.265  < 2e-16 ***
mutualhas-mutual      0.363399   0.023052  15.764  < 2e-16 ***
shareshas-shares      0.546775   0.022425  24.382  < 2e-16 ***
managedhas-managed    0.430725   0.038572  11.167  < 2e-16 ***
otherfinhas-otherfin  0.318133   0.033633   9.459  < 2e-16 ***
haspvpenshas-pvpens   0.533512   0.017915  29.780  < 2e-16 ***
classEmployer         0.668284   0.205235   3.256  0.00113 **
classSelf-Employed    0.443700   0.164650   2.695  0.00704 **
classManager         -0.034027   0.035196  -0.967  0.33365
classInactive         0.658286   0.023356  28.185  < 2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
-----------------------------------------------------------------------------------------------
       Feature        Gain       Cover  Frequency
 1:     sa0100 0.398016208 0.300680258 0.30242424
 2:      class 0.182399598 0.068364293 0.07272727
 3:     otherp 0.175618795 0.115328588 0.06242424
 4:        age 0.084572130 0.089739245 0.10757576
 5:     shares 0.047829081 0.051668312 0.03242424
 6:  haspvpens 0.022406270 0.037037891 0.06545455
 7:      hsize 0.019040322 0.059314067 0.07575758
 8:    homeown 0.015174979 0.048671795 0.03030303
 9:     mutual 0.013487357 0.045413066 0.02484848
10:    managed 0.011255894 0.040530666 0.03939394
11:    edu_ref 0.010968012 0.034228805 0.05424242
12:      bonds 0.008557215 0.044558313 0.03515152
13:       wave 0.005406768 0.023771767 0.05787879
14:   otherfin 0.002635287 0.032523253 0.01878788
15: head_gendr 0.002632084 0.008169682 0.02060606
[1] "LightGBM Accuracy: 0.859841768017087"
Confusion Matrix and Statistics

          Reference
Prediction      0      1
         0 825371  66987
         1  90699 142000

               Accuracy : 0.8598
                 95% CI : (0.8592, 0.8605)
    No Information Rate : 0.8142
    P-Value [Acc > NIR] : < 2.2e-16

                  Kappa : 0.5561

 Mcnemar's Test P-Value : < 2.2e-16

            Sensitivity : 0.6795
            Specificity : 0.9010
         Pos Pred Value : 0.6102
         Neg Pred Value : 0.9249
             Prevalence : 0.1858
         Detection Rate : 0.1262
   Detection Prevalence : 0.2068
      Balanced Accuracy : 0.7902

       'Positive' Class : 1